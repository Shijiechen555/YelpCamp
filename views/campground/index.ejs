<% layout('layout/boilerplate') %>
<div id="map" style="width: 100%; height: 500px;"></div>
    <h1>All Campgrounds</h1>
    <div>
        <% for( let campground of campgrounds) {%>
            <div class="card mb-3" >
                <div class="row">
                    <div class="col-md-4">
                        <% if(campground.image.length) {%>
                            <img class="img-fluid" alt="" src="<%= campground.image[0].url %> ">
                            <% }else{ %>
                                <img class="img-fluid" alt="" src="https://cooley.rcsdk8.org/sites/main/files/main-images/camera_lense_0.jpeg">
                                <% } %>
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title">
                                <%= campground.title %>
                                <br>
                                <%= campground.properties.popMarkup %> 
                                    <p class="card-text">
                                        <%= campground.description %>
                                    </p>
                                    <p class="card-text">
                                        <%= campground.location %>
                                    </p>
                                    <a class="btn btn-primary" href="/campground/<%=campground._id%>">View
                                        <%=campground.title %>
                                    </a>
                            </h5>
                        </div>
                    </div>
                </div>
            </div>
            <% } %>
    </div>
    <a href="/campground/new">new Campground</a>
    <script>
        const maptoken = '<%-process.env.MAPBOX_TOKEN%>';
        const campgrounds = {features:<%-JSON.stringify(campgrounds) %>};
    </script>

    <script src="/javascripts/clusterMap.js"></script>